webpackJsonp([2,0],[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var a=i(8),r=n(a),o=i(58),s=n(o),c=i(15),u=n(c),l=i(57),d=n(l);i(50);var f=i(69),m=n(f);r.default.use(d.default),r.default.use(m.default),new r.default({el:"#app",store:u.default,template:"<App/>",components:{App:s.default}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="https://api.imjad.cn/cloudmusic";e.default={getSong:function(t){return i+"?id="+t},getLrc:function(t){return i+"?type=lyric&id="+t},getDetail:function(t){return i+"?type=detail&id="+t},getPlayList:function(t){return i+"?type=playlist&id="+t},getMv:function(t){return i+"?type=mv&id="+t},searchSong:function(t){return i+"?type=search&s="+t}}},,,,,,,,,,,,,function(t,e,i){var n,a;i(53),n=i(17);var r=i(65);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,t.exports=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(8),r=n(a),o=i(2),s=n(o);r.default.use(s.default);var c=new s.default.Store({state:{audio:{id:0,name:"标题",singer:"演唱者",album_pic:"static/defaultD.png",lyric:"",location:"",album:""},currentIndex:0,playing:!1,loading:!1,songList:[],currentTime:0,tmpCurrentTime:0,durationTime:0,bufferedTime:0,change:!1},getters:{audio:function(t){return t.audio},playing:function(t){return t.playing},durationTime:function(t){return t.durationTime},currentIndex:function(t){return t.currentIndex},tmpCurrentTime:function(t){return t.tmpCurrentTime},change:function(t){return t.change},currentTime:function(t){return t.currentTime},prCurrentTime:function(t){return t.currentTime/t.durationTime*100},bufferedTime:function(t){return t.bufferedTime/t.durationTime*100}},mutations:{play:function(t){t.playing=!0},pause:function(t){t.playing=!1},setAudio:function(t){t.audio=t.songList[t.currentIndex-1]},setChange:function(t,e){t.change=e},setLocation:function(t,e){t.audio.location=e},updateCurrentTime:function(t,e){t.currentTime=e},updateDurationTime:function(t,e){t.durationTime=e},updateBufferedTime:function(t,e){t.bufferedTime=e},changeTime:function(t,e){t.tmpCurrentTime=e},playNext:function(t){t.currentIndex++,t.currentIndex>t.songList.length&&(t.currentIndex=1),t.audio=t.songList[t.currentIndex-1]},playPrev:function(t){t.currentIndex--,t.currentIndex<1&&(t.currentIndex=t.songList.length),t.audio=t.songList[t.currentIndex-1]},addToList:function(t,e){var i=!1;t.songList.forEach(function(n,a){n.id===e.id&&(i=!0,console.log("index:"+a),t.currentIndex=a+1)}),i||(t.songList.push(e),t.currentIndex=t.songList.length)}}});e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(62),r=n(a),o=i(61),s=n(o),c=i(59),u=n(c),l=i(60),d=n(l);e.default={data:function(){return{searchShow:!1,detailShow:!1}},components:{Rank:s.default,SearchBar:r.default,Player:u.default,PlayerDetail:d.default},methods:{toggleSearch:function(){this.searchShow=!this.searchShow},toggleDetail:function(){this.detailShow=!this.detailShow}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),r=n(a),o=i(2);e.default={name:"item-list",props:{role:{type:String,default:"list"},api:{type:String},words:{type:""}},data:function(){return{lists:[],isloading:!1,currentPlay:!1,value:0}},created:function(){"list"===this.role&&this.loadData()},watch:{api:function(t,e){this.loadData()}},methods:{loadData:function(){var t=this;this.isloading=!0,this.$http.get(this.api).then(function(e){"list"===t.role?t.lists=e.data.playlist.tracks:"search"===t.role&&(t.lists=e.data.result.songs),t.isloading=!1},function(t){console.log("jsonp fail")})},change:function(t){this.value=t},Player:function(t){var e={};e.id=t.id,e.singer=t.ar[0].name,e.album_pic=t.al.picUrl,e.name=t.name,this.$store.commit("addToList",e),this.$store.commit("setAudio")}},computed:(0,r.default)({},(0,o.mapGetters)(["currentIndex"]))}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),r=n(a),o=i(1),s=n(o),c=i(2);e.default={data:function(){return{loading:!1,play:"play_circle_outline",bottomSheet:!1,sheetStyle:"songlist",listStyle:"listStyle"}},watch:{audio:function(t){t.location||this.loadSongSrc(t.id)},playing:function(t){if(t){this.play="pause_circle_outline";var e=document.getElementById("audioPlay").play();void 0!==e&&e.then(function(){}).catch(function(t){})}else this.play="play_circle_outline",document.getElementById("audioPlay").pause()}},methods:{toggleStatus:function(){this.playing?this.$store.commit("pause"):this.$store.commit("play")},canPlaySong:function(){this.loading=!1},loadError:function(){document.getElementById("audioPlay").currentSrc&&(this.loading=!1)},playNext:function(){this.$store.commit("playNext")},playPrev:function(){this.$store.commit("playPrev")},updateTime:function(){var t=this,e=parseInt(document.getElementById("audioPlay").currentTime);document.getElementById("audioPlay").onprogress=function(){t.$store.commit("updateBufferedTime",parseInt(document.getElementById("audioPlay").buffered.end(0)))},this.$store.commit("updateDurationTime",parseInt(document.getElementById("audioPlay").duration)),this.change?(document.getElementById("audioPlay").currentTime=this.tmpCurrentTime,this.$store.commit("setChange",!1)):this.$store.commit("updateCurrentTime",e)},showDetail:function(){this.$emit("detail")},loadSongSrc:function(t){var e=this;0!==t&&this.$http.get(s.default.getSong(t)).then(function(t){e.$store.commit("setLocation",t.data.data[0].url),e.$store.commit("play"),e.loading=!0},function(t){console.log("jsonp fail")})}},filters:{pre:function(t){return t/this.durationTime*100}},computed:(0,r.default)({},(0,c.mapGetters)(["currentTime","bufferedTime","tmpCurrentTime","prCurrentTime","audio","playing","change"]))}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(3),r=n(a),o=i(2),s=i(1),c=n(s);e.default={data:function(){return{lyric:"",afterLrc:[],lrcIndex:0}},created:function(){this.loadLrc(this.audio.id)},methods:{back:function(){this.$emit("back")},togglePlayer:function(){this.playing?this.$store.commit("pause"):this.$store.commit("play")},prev:function(){this.$store.commit("playPrev")},next:function(){this.$store.commit("playNext")},changeTime:function(t){var e=t*this.durationTime/100;this.$store.commit("changeTime",e),this.$store.commit("setChange",!0)},loadLrc:function(t){var e=this;return this.afterLrc=[{txt:"正在加载中..."}],t?void this.$http.get(c.default.getLrc(t)).then(function(t){t.data.nolyric?e.afterLrc=[{txt:"(⊙０⊙) 暂无歌词"}]:(e.lyric=t.data.lrc.lyric,e.getLrc())},function(t){console.log("lrc fail")}):void(this.afterLrc=[{txt:"这里显示歌词哦！"}])},getLrc:function(){if(this.lyric){for(var t=this.lyric.split("\n"),e=[],i=/\[\d*:\d*((\.|\:)\d*)*\]/g,n=0;n<t.length;n++){var a=t[n].match(i);if(a)for(var r=t[n].replace(i,""),o=0;o<a.length;o++){var s={},c=a[o],u=Number(String(c.match(/\[\d*/i)).slice(1)),l=Number(String(c.match(/\:\d*/i)).slice(1)),d=60*u+l;s.time=d,s.txt=r,e.push(s)}}this.afterLrc=e}}},filters:{time:function(t){var e=Math.floor(parseInt(t)),i=Math.floor(t/60);i<10&&(i="0"+i);var n=e%60;return n<10&&(n="0"+n),i+":"+n}},computed:(0,r.default)({},(0,o.mapGetters)(["currentTime","bufferedTime","durationTime","prCurrentTime","audio","playing"]),{lrcOffset:function(){if(this.afterLrc){for(var t=Math.round(this.currentTime),e=0;e<this.afterLrc.length;e++)this.afterLrc[e].time===t&&(this.lrcIndex=e);return 58*-this.lrcIndex}}})}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),r=n(a),o=i(14),s=n(o);e.default={data:function(){return{currentSong:{id:0},listApi:r.default.getPlayList("542032543")}},components:{Itemlist:s.default},methods:{searchW:function(){this.$emit("searchW")}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),r=n(a),o=i(14),s=n(o);e.default={data:function(){return{words:"",listApi:"",role:"search"}},components:{Itemlist:s.default},created:function(){},methods:{searchSong:function(t){this.listApi=r.default.searchSong(t)},back:function(){this.$emit("back")}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,i){var n,a;i(56),n=i(16);var r=i(68);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,t.exports=n},function(t,e,i){var n,a;i(51),n=i(18);var r=i(63);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,t.exports=n},function(t,e,i){var n,a;i(52),n=i(19);var r=i(64);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,t.exports=n},function(t,e,i){var n,a;i(55),n=i(20);var r=i(67);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,t.exports=n},function(t,e,i){var n,a;i(54),n=i(21);var r=i(66);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=r.render,a.staticRenderFns=r.staticRenderFns,t.exports=n},function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("div",{staticClass:"foot"},[e("div",{staticClass:"player-mini"},[e("div",{staticClass:"mini-content"},[e("audio",{attrs:{src:t.audio.location,autoplay:"",id:"audioPlay"},on:{timeupdate:t.updateTime,canplay:t.canPlaySong,error:t.loadError,ended:t.playNext}}),t._v(" "),e("div",{staticClass:"cover"},[e("mu-circular-progress",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],attrs:{size:40}}),t._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"xmplogo",attrs:{src:t.audio.album_pic,alt:t.audio.name},on:{click:t.showDetail}})]),t._v(" "),e("div",{staticClass:"info"},[e("div",{staticClass:"name xmpname",on:{click:t.showDetail}},[t._v(t._s(t.audio.name))]),t._v(" "),e("div",{staticClass:"artist xmpartist",on:{click:t.showDetail}},[t._v(t._s(t.audio.singer))]),t._v(" "),e("div",{staticClass:"control"},[e("mu-icon-button",{attrs:{icon:"fast_rewind",size:32},on:{click:t.playPrev}}),t._v(" "),e("mu-icon-button",{attrs:{icon:t.play,size:32},on:{click:t.toggleStatus}}),t._v(" "),e("mu-icon-button",{attrs:{icon:"fast_forward",size:32},on:{click:t.playNext}})])]),t._v(" "),e("div",{staticClass:"pro"},[e("div",{staticClass:"pro-load proload",style:{"-webkit-transform":"translateX("+t.bufferedTime+"%)"}}),t._v(" "),e("div",{staticClass:"pro-play proplay",style:{"-webkit-transform":"translateX("+t.prCurrentTime+"%)"}})])]),t._v(" ")])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("section",{staticClass:"main"},[e("div",{staticClass:"content"},[e("div",{staticClass:"player"},[e("div",{staticClass:"player-inner"},[e("mu-appbar",{attrs:{title:t.audio.name+"-"+t.audio.singer}},[e("mu-icon-button",{attrs:{icon:"keyboard_arrow_left"},on:{click:t.back},slot:"left"}),t._v(" "),e("mu-icon-button",{attrs:{icon:"more_horiz"},slot:"right"})]),t._v(" "),e("div",{staticClass:"cover h5p-pause",class:{"h5p-roll":t.playing}},[e("img",{staticClass:"img1",attrs:{src:t.audio.album_pic,alt:t.audio.name}})]),t._v(" "),e("div",{staticClass:"lyric lrc",attrs:{id:"lyric"}},[e("div",{staticClass:"lrc-inner",staticStyle:{transition:"-webkit-transform 0.3s ease-out","transform-origin":"0px 0px 0px"},style:{transform:" translate3d(0px,"+t.lrcOffset+"px, 0px)"}},t._l(t.afterLrc,function(i,n){return e("p",{key:n,attrs:{id:"line-"+n}},[t._v(t._s(i.txt))])}))]),t._v(" "),e("div",{staticClass:"pro"},[e("div",{staticClass:"pro-wrap"},[e("mu-slider",{directives:[{name:"model",rawName:"v-model",value:t.prCurrentTime,expression:"prCurrentTime"}],staticClass:"song-slider",attrs:{disabled:!t.currentTime>0},domProps:{value:t.prCurrentTime},on:{change:t.changeTime,input:function(e){t.prCurrentTime=e}}})]),t._v(" "),e("div",{staticClass:"time"},[e("time",{attrs:{id:"cur"}},[t._v(t._s(t._f("time")(t.currentTime)))]),t._v(" "),e("time",{attrs:{id:"total"}},[t._v(t._s(t._f("time")(t.durationTime)))])])]),t._v(" "),e("div",{staticClass:"control-bar"},[e("i",{staticClass:"control-btn btn-prev btn-sm",on:{click:t.prev}}),t._v(" "),e("i",{staticClass:"control-btn btn-play btn-lg",class:{"btn-pause":t.playing},on:{click:t.togglePlayer}}),t._v(" "),e("i",{staticClass:"control-btn btn-next btn-sm",on:{click:t.next}})])]),t._v(" "),e("div",{staticClass:"mask"},[e("div",{staticClass:"album-cover",style:{"background-image":"url("+t.audio.album_pic+")"}}),t._v(" "),e("div",{staticClass:"cover-mask",staticStyle:{opacity:"0.6"}})])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("div",[t.isloading?e("mu-circular-progress",{staticClass:"center",attrs:{size:60}}):t._e(),t._v(" "),e("mu-list",{directives:[{name:"show",rawName:"v-show",value:!t.isloading,expression:"!isloading"}],attrs:{value:t.value},on:{change:t.change}},t._l(t.lists,function(i,n){return e("div",[e("mu-list-item",{attrs:{disableRipple:!0,value:n+1,title:i.name,describeText:i.ar[0].name},on:{click:function(e){t.Player(i,n)}}},[e("span",{staticClass:"indexStyle",slot:"left"},[t._v(t._s(n+1))])]),t._v(" "),e("mu-divider",{attrs:{inset:""}})])}))])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("div",{staticClass:"search-bar"},[e("mu-appbar",[e("mu-icon-button",{attrs:{icon:"keyboard_arrow_left"},on:{click:t.back},slot:"left"}),t._v(" "),e("form",{attrs:{id:"searchForm"},on:{submit:function(e){e.preventDefault(),t.searchSong(t.words)}}},[e("mu-text-field",{directives:[{name:"model",rawName:"v-model",value:t.words,expression:"words"}],attrs:{hintText:"请输入歌曲关键字"},domProps:{value:t.words},on:{input:function(e){t.words=e}}})])]),t._v(" "),e("Itemlist",{attrs:{api:t.listApi,role:t.role}})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("div",{staticClass:"rank"},[e("div",{staticClass:"header"},[e("mu-appbar",{attrs:{title:"VueDemo Music"}},[e("mu-icon-button",{attrs:{icon:"search"},on:{click:t.searchW},slot:"right"})])]),t._v(" "),e("div",{staticClass:"list-wrapper"},[e("Itemlist",{attrs:{api:t.listApi}})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=(t.$createElement,t._c);return e("div",{attrs:{id:"app"}},[e("transition",[t.searchShow&&!t.detailShow?e("SearchBar",{on:{back:t.toggleSearch}}):t._e()]),t._v(" "),e("transition",[e("Rank",{directives:[{name:"show",rawName:"v-show",value:!t.searchShow&&!t.detailShow,expression:"!searchShow&&!detailShow"}],on:{searchW:t.toggleSearch}})]),t._v(" "),e("Player",{directives:[{name:"show",rawName:"v-show",value:!t.detailShow,expression:"!detailShow"}],on:{detail:t.toggleDetail}}),t._v(" "),e("transition",{attrs:{name:"slide-fade"}},[t.detailShow?e("PlayerDetail",{on:{back:t.toggleDetail}}):t._e()])])},staticRenderFns:[]}}]);
//# sourceMappingURL=app.05ba7bfe41011e9a0d2f.js.map